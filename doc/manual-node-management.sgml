<chapter id="node-management">
 <title>Node Management</title>
 <indexterm>
  <primary>Node Management</primary>
 </indexterm>
 <para>
  How to control and setup replication differs between &bdr; and
  &udr; as the former has to establish replication in two
  directions.
 </para>
 <sect1>
  <title>Node Management for &udr;</title>
  <para>
   The <function>bdr.bdr_subscribe()</function> is used to receive
   changes from the database specified in the function parameters
   into the current database. Subscribing to another node using this
   function will automatically copy the existing data in that the
   database subscribed to.
  </para>
  <para>
   When subscribing to big databases (starting at tens of gigabytes)
   it can be desirable not to use a logical dump to clone the
   database. Instead a physical base backup can be used as the base
   for joining. The <application>bdr_init_copy</application> tool
   can be used to subscribe to an existing database with all its
   data. It will either take a new basebackup (by internally
   invoking <application>pg_basebackup</application>) or use a
   provided one. That basebackup will be brought online and receives
   all changes that have happend since it's creation.
   <note><para>
     Using <application>bdr_init_copy</application> will clone all
     databases from the origin server, but only connect one database
     as a subscriber.
   </para></note>
  </para>
 </sect1>

 <sect1>
  <title>Node Management for &bdr;</title>
  <para>
   For &bdr; every node has to have a connection to every other
   node. To make conifguration easy, every node addition
   automatically adds awareness of the new to all preexisting nodes.
  </para>
  <para>
   The <function>bdr.bdr_group_create()</function> is used on the
   first node of a bdr cluster. Doing so makes &bdr; active on that
   database and allows other nodes to join the &bdr; cluster (which
   consists out of one node at that point). Once the initial node is
   created every further node can join the &bdr; cluster using
   the <function>bdr.bdr_group_join()</function> function.
  </para>
  <para>
   When subscribing to big databases (starting at tens of gigabytes)
   it can be desirable not to use a logical dump to clone the
   database. Instead a physical base backup can be used as the base
   for joining. The <application>bdr_init_copy</application> tool
   can be used to subscribe to an existing database with all its
   data. It will either take a new basebackup (by internally
   invoking <application>pg_basebackup</application>) or use a
   provided one. That basebackup will be brought online and receives
   all changes that have happend since it's creation.
   <note><para>
     Using <application>bdr_init_copy</application> will clone all
     databases from the origin server, but only connect one database
     as a subscriber.
   </para></note>
  </para>

 </sect1>
</chapter>
