SELECT * FROM bdr_regress_variables()
\gset
\c :node1_dsn
SELECT pglogical.replicate_ddl_command($DDL$
CREATE TABLE public.demo(
    id integer primary key
);
$DDL$);
 replicate_ddl_command 
-----------------------
 t
(1 row)

SELECT pglogical.replication_set_add_table('dummy_nodegroup', 'demo');
 replication_set_add_table 
---------------------------
 t
(1 row)

SELECT nspname, relname FROM pglogical.tables WHERE set_name = 'dummy_nodegroup';
 nspname | relname 
---------+---------
 public  | demo
(1 row)

INSERT INTO demo(id) VALUES (42);
\c :node2_dsn
SELECT pglogical_wait_slot_confirm_lsn(NULL, NULL);
 pglogical_wait_slot_confirm_lsn 
---------------------------------
 
(1 row)

SELECT pglogical.replication_set_add_table('dummy_nodegroup', 'demo');
 replication_set_add_table 
---------------------------
 t
(1 row)

SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'demo';
 table_name 
------------
 demo
(1 row)

SELECT nspname, relname FROM pglogical.tables WHERE set_name = 'dummy_nodegroup';
 nspname | relname 
---------+---------
 public  | demo
(1 row)

SELECT id FROM demo ORDER BY id;
 id 
----
 42
(1 row)

INSERT INTO demo(id) VALUES (43);
\c :node1_dsn
SELECT pglogical_wait_slot_confirm_lsn(NULL, NULL);
 pglogical_wait_slot_confirm_lsn 
---------------------------------
 
(1 row)

SELECT id FROM demo ORDER BY id;
 id 
----
 42
 43
(2 rows)

